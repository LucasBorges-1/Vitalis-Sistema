<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/login_styles.css' %}">
    <link rel="icon" type="image/png" href="{% static 'img/favicon.ico' %}">
</head>

<body>
    <div class="login-container">
        <h2>Login</h2>
        
        <div class="message-area" role="alert" aria-live="assertive">
            {% if status %}
                <div class="alert-danger">
                    {% if status == '1' %}
                        Por favor, digite um email válido e a senha.
                    {% elif status == '2' %}
                        Senha deve ter no mínimo 5 caracteres.
                    {% elif status == 'not_verified' %} {# NOVO STATUS #}
                        Sua conta ainda não foi verificada. Por favor, verifique seu e-mail para ativar sua conta.
                    {% elif status == '3' or status == '4' %} {# CONSOLIDADO #}
                        Email ou senha inválidos.
                    {% elif status == '99' %} {# Erro genérico do backend #}
                        Ocorreu um erro inesperado. Tente novamente mais tarde.
                    {% endif %}
                </div>
            {% endif %}
        </div>

        <form action="{% url 'accounts:login' %}" method="POST" novalidate> {# Adicionado novalidate para controle total pelo backend #}
            {% csrf_token %}
            
            <div class="form-group">
                <label for="id_email">Email</label> {# Id mais padrão #}
                <input type="email" id="id_email" name="email" required placeholder="Digite seu email" value="{{ request.POST.email|default:'' }}"> {# type="email" e pre-popular campo #}
            </div>
            <div class="form-group">
                <label for="id_senha">Senha</label> {# Id mais padrão #}
                <input type="password" id="id_senha" name="senha" required placeholder="Digite sua senha">
            </div>
            <button type="submit" class="login-btn">Login</button>
        </form>
        <p class="register-link">Não tem conta? <a href="{% url 'accounts:registrar' %}">Registre-se aqui</a></p>
    </div>
</body>
</html>